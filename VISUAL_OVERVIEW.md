# ğŸ“Š DriveHub Authentication - Visual Overview

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DRIVEHUB AUTHENTICATION                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            FRONTEND (React 19)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Login Page  â”‚        â”‚Register Page â”‚        â”‚  Dashboard   â”‚            â”‚
â”‚  â”‚   (tsx)     â”‚        â”‚   (tsx)      â”‚        â”‚  (Protected) â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                      â”‚                       â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                    â”‚                       â”‚                                 â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚           â”‚  AuthContext API   â”‚   â”‚ ProtectedRoute    â”‚                   â”‚
â”‚           â”‚  (State + Hooks)   â”‚   â”‚  (Route Guard)    â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                     â”‚                        â”‚                              â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚           â”‚    Axios Instance                        â”‚                    â”‚
â”‚           â”‚  (Auto Token Injection + Interceptor)    â”‚                    â”‚
â”‚           â”‚                                          â”‚                    â”‚
â”‚           â”‚  â€¢ Request: Add Authorization Header     â”‚                    â”‚
â”‚           â”‚  â€¢ Response: Handle 401 Errors           â”‚                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                     â”‚                                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚           â”‚      authService.js                      â”‚                    â”‚
â”‚           â”‚   â€¢ register()  â†’ POST /auth/register    â”‚                    â”‚
â”‚           â”‚   â€¢ login()     â†’ POST /auth/login       â”‚                    â”‚
â”‚           â”‚   â€¢ logout()    â†’ Clear localStorage     â”‚                    â”‚
â”‚           â”‚   â€¢ getMe()     â†’ GET /auth/me           â”‚                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                     â”‚                                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚           â”‚      LocalStorage                        â”‚                    â”‚
â”‚           â”‚  â€¢ token (JWT)                           â”‚                    â”‚
â”‚           â”‚  â€¢ user (User Data)                      â”‚                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ HTTP/HTTPS
                                    â”‚ Bearer Token
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND (Spring Boot 3.2)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚         â”‚            SecurityFilterChain                         â”‚          â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚         â”‚ 1. CORS Filter                                         â”‚          â”‚
â”‚         â”‚ 2. CSRF Filter (Disabled)                              â”‚          â”‚
â”‚         â”‚ 3. Authorization Filter                                â”‚          â”‚
â”‚         â”‚ 4. JWT Authentication Filter â†â”€â”                       â”‚          â”‚
â”‚         â”‚ 5. UserPassword Authentication â”‚                       â”‚          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                          â”‚                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚     JwtAuthenticationFilter                         â”‚            â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚         â”‚ 1. Extract JWT from Authorization header            â”‚            â”‚
â”‚         â”‚ 2. Validate token signature & expiration            â”‚            â”‚
â”‚         â”‚ 3. Load UserDetails from database                   â”‚            â”‚
â”‚         â”‚ 4. Set SecurityContext authentication               â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                  â”‚                                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚          AuthController                           â”‚              â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚         â”‚                                                    â”‚              â”‚
â”‚         â”‚  POST /api/auth/register                          â”‚              â”‚
â”‚         â”‚  â”œâ”€ Validate input                                â”‚              â”‚
â”‚         â”‚  â”œâ”€ Check email uniqueness                        â”‚              â”‚
â”‚         â”‚  â”œâ”€ Create User (Customer/Admin)                  â”‚              â”‚
â”‚         â”‚  â”œâ”€ Hash password with BCrypt                     â”‚              â”‚
â”‚         â”‚  â”œâ”€ Save to database                              â”‚              â”‚
â”‚         â”‚  â”œâ”€ Generate JWT token                            â”‚              â”‚
â”‚         â”‚  â””â”€ Return AuthResponse                           â”‚              â”‚
â”‚         â”‚                                                    â”‚              â”‚
â”‚         â”‚  POST /api/auth/login                             â”‚              â”‚
â”‚         â”‚  â”œâ”€ Validate input                                â”‚              â”‚
â”‚         â”‚  â”œâ”€ Authenticate with AuthenticationManager       â”‚              â”‚
â”‚         â”‚  â”œâ”€ BCrypt password match                         â”‚              â”‚
â”‚         â”‚  â”œâ”€ Generate JWT token                            â”‚              â”‚
â”‚         â”‚  â””â”€ Return AuthResponse                           â”‚              â”‚
â”‚         â”‚                                                    â”‚              â”‚
â”‚         â”‚  GET /api/auth/me (Protected)                     â”‚              â”‚
â”‚         â”‚  â”œâ”€ Extract user from SecurityContext             â”‚              â”‚
â”‚         â”‚  â””â”€ Return user details                           â”‚              â”‚
â”‚         â”‚                                                    â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                      â”‚                    â”‚                                 â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                               â”‚                                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚     AuthServiceImpl (Business Logic)              â”‚               â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚         â”‚                                                    â”‚              â”‚
â”‚         â”‚ â€¢ Register: Create user + Generate token          â”‚              â”‚
â”‚         â”‚ â€¢ Login: Authenticate + Generate token            â”‚              â”‚
â”‚         â”‚ â€¢ Password encryption via PasswordEncoder         â”‚              â”‚
â”‚         â”‚ â€¢ JWT generation via JwtUtil                      â”‚              â”‚
â”‚         â”‚ â€¢ Transaction management (@Transactional)         â”‚              â”‚
â”‚         â”‚                                                    â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                              â”‚                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚   JwtUtil (Token Management)                  â”‚                 â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚         â”‚                                                â”‚                 â”‚
â”‚         â”‚ â€¢ generateToken(User) â†’ JWT String            â”‚                 â”‚
â”‚         â”‚ â€¢ extractUsername(token) â†’ Email              â”‚                 â”‚
â”‚         â”‚ â€¢ validateToken(token, userDetails) â†’ Boolean â”‚                 â”‚
â”‚         â”‚ â€¢ extractClaim(token, resolver) â†’ Any         â”‚                 â”‚
â”‚         â”‚ â€¢ Signature: HS256 with secret key             â”‚                 â”‚
â”‚         â”‚ â€¢ Expiration: 24 hours (configurable)          â”‚                 â”‚
â”‚         â”‚                                                â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â”‚                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚         â”‚    UserRepository (Data Access)           â”‚                     â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
â”‚         â”‚                                           â”‚                      â”‚
â”‚         â”‚ â€¢ findByEmail(email) â†’ Optional<User>    â”‚                      â”‚
â”‚         â”‚ â€¢ existsByEmail(email) â†’ Boolean         â”‚                      â”‚
â”‚         â”‚ â€¢ save(user) â†’ User                      â”‚                      â”‚
â”‚         â”‚ â€¢ findById(id) â†’ Optional<User>          â”‚                      â”‚
â”‚         â”‚                                           â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                              â”‚                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚         â”‚    Entity Layer (Domain Models)           â”‚                     â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
â”‚         â”‚                                           â”‚                      â”‚
â”‚         â”‚   User (Abstract)                         â”‚                      â”‚
â”‚         â”‚   â”œâ”€ id, name, email, phone               â”‚                      â”‚
â”‚         â”‚   â”œâ”€ password, role, enabled              â”‚                      â”‚
â”‚         â”‚   â””â”€ Implements UserDetails               â”‚                      â”‚
â”‚         â”‚       â”‚                                   â”‚                      â”‚
â”‚         â”‚       â”œâ”€ Customer                         â”‚                      â”‚
â”‚         â”‚       â”‚  â””â”€ drivingLicenseNumber, address â”‚                      â”‚
â”‚         â”‚       â”‚                                   â”‚                      â”‚
â”‚         â”‚       â””â”€ Admin                            â”‚                      â”‚
â”‚         â”‚          â””â”€ department, employeeId        â”‚                      â”‚
â”‚         â”‚                                           â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                              â”‚                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚         â”‚  GlobalExceptionHandler                   â”‚                     â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
â”‚         â”‚                                           â”‚                      â”‚
â”‚         â”‚ â€¢ IllegalArgumentException â†’ 400          â”‚                      â”‚
â”‚         â”‚ â€¢ UsernameNotFoundException â†’ 404          â”‚                      â”‚
â”‚         â”‚ â€¢ BadCredentialsException â†’ 401            â”‚                      â”‚
â”‚         â”‚ â€¢ MethodArgumentNotValid â†’ 400             â”‚                      â”‚
â”‚         â”‚ â€¢ Generic Exception â†’ 500                  â”‚                      â”‚
â”‚         â”‚                                           â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ JPA/Hibernate
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATABASE (MySQL)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚           users table (Single Table Inheritance)         â”‚              â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚   â”‚                                                           â”‚              â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚   â”‚  â”‚ id (PK)     â”‚ BIGINT   â”‚ AUTO_INCREMENT          â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ name        â”‚ VARCHAR  â”‚ NOT NULL                â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ email (UQ)  â”‚ VARCHAR  â”‚ NOT NULL, UNIQUE        â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ phone       â”‚ VARCHAR  â”‚ NOT NULL                â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ password    â”‚ VARCHAR  â”‚ NOT NULL (hashed)       â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ role        â”‚ ENUM     â”‚ ADMIN, CUSTOMER         â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ enabled     â”‚ BOOLEAN  â”‚ DEFAULT true            â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ user_type   â”‚ VARCHAR  â”‚ ADMIN, CUSTOMER         â”‚   â”‚              â”‚
â”‚   â”‚  â”‚                                                    â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ -- Customer Fields                               â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ driving_license_number â”‚ VARCHAR â”‚ NULL          â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ address                â”‚ VARCHAR â”‚ NULL          â”‚   â”‚              â”‚
â”‚   â”‚  â”‚                                                    â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ -- Admin Fields                                   â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ department  â”‚ VARCHAR  â”‚ NULL                     â”‚   â”‚              â”‚
â”‚   â”‚  â”‚ employee_id â”‚ VARCHAR  â”‚ NULL                     â”‚   â”‚              â”‚
â”‚   â”‚  â”‚                                                    â”‚   â”‚              â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚   â”‚                                                           â”‚              â”‚
â”‚   â”‚  Indexes:                                                â”‚              â”‚
â”‚   â”‚  â€¢ PRIMARY KEY: id                                       â”‚              â”‚
â”‚   â”‚  â€¢ UNIQUE INDEX: email                                   â”‚              â”‚
â”‚   â”‚                                                           â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Authentication Flow Diagrams

### Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Input     â”‚
â”‚  (Form Data)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Validation     â”‚
â”‚ â€¢ Email format          â”‚
â”‚ â€¢ Password length       â”‚
â”‚ â€¢ Passwords match       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Valid
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/auth/register â”‚
â”‚ + JSON Body             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthController.register()       â”‚
â”‚ â€¢ @Valid annotation check       â”‚
â”‚ â€¢ Call AuthService.register()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthServiceImpl.register()       â”‚
â”‚ 1. Check email uniqueness       â”‚
â”‚ 2. Create User object           â”‚
â”‚ 3. Set role & enabled flag      â”‚
â”‚ 4. Encode password (BCrypt)     â”‚
â”‚ 5. Save to database             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JwtUtil.generateToken()         â”‚
â”‚ â€¢ Extract claims (id, role)     â”‚
â”‚ â€¢ Set subject (email)           â”‚
â”‚ â€¢ Set issued time & expiration  â”‚
â”‚ â€¢ Sign with HS256               â”‚
â”‚ â€¢ Return JWT string             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthResponse                    â”‚
â”‚ {                               â”‚
â”‚   "token": "eyJh...",           â”‚
â”‚   "id": 1,                      â”‚
â”‚   "name": "John",               â”‚
â”‚   "email": "john@email.com",    â”‚
â”‚   "role": "CUSTOMER"            â”‚
â”‚ }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Receives Response       â”‚
â”‚ â€¢ Store token in localStorage   â”‚
â”‚ â€¢ Store user in localStorage    â”‚
â”‚ â€¢ Update AuthContext            â”‚
â”‚ â€¢ Redirect to /dashboard        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Login Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Credentials       â”‚
â”‚  (Email + Password)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Validation     â”‚
â”‚ â€¢ Email not empty       â”‚
â”‚ â€¢ Password not empty    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Valid
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/auth/login   â”‚
â”‚ + JSON Body            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthController.login()           â”‚
â”‚ â€¢ @Valid annotation check        â”‚
â”‚ â€¢ Call AuthService.login()       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthServiceImpl.login()           â”‚
â”‚ 1. Call AuthenticationManager    â”‚
â”‚ 2. Pass email & password         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthenticationManager            â”‚
â”‚ 1. Call UserDetailsService       â”‚
â”‚ 2. Load user by email            â”‚
â”‚ 3. Get user from database        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PasswordEncoder.matches()        â”‚
â”‚ 1. Compare plain & hashed pwd    â”‚
â”‚ 2. Return true/false             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚          â”‚
    â–¼          â–¼
Success      Failure
    â”‚          â”‚
    â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Good  â”‚  â”‚ BadCredentials       â”‚
â”‚      â”‚  â”‚ Exception thrown     â”‚
â”‚      â”‚  â”‚                      â”‚
â”‚      â”‚  â”‚ â†’ 401 Unauthorized   â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Generate JWT Token               â”‚
â”‚ â€¢ Same as registration           â”‚
â”‚ â€¢ Return AuthResponse            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend                         â”‚
â”‚ â€¢ Store token in localStorage    â”‚
â”‚ â€¢ Store user in localStorage     â”‚
â”‚ â€¢ Update AuthContext             â”‚
â”‚ â€¢ Redirect to /dashboard         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Protected Route Access Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /dashboard (Protected Route)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProtectedRoute Component         â”‚
â”‚ â€¢ Check isAuthenticated flag     â”‚
â”‚ â€¢ Check loading state            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚
    â–¼                  â–¼
Logged In          Not Logged
(Has Token)        (No Token)
    â”‚                  â”‚
    â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Render     â”‚  â”‚ Navigate         â”‚
â”‚ Children   â”‚  â”‚ to /login        â”‚
â”‚            â”‚  â”‚                  â”‚
â”‚ Continue   â”‚  â”‚ 401 Unauthorized â”‚
â”‚ to Request â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add JWT to Request Headers       â”‚
â”‚ Authorization: Bearer {token}    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JwtAuthenticationFilter          â”‚
â”‚ 1. Extract token from header     â”‚
â”‚ 2. Parse & validate token        â”‚
â”‚ 3. Check expiration              â”‚
â”‚ 4. Verify signature              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚
    â–¼             â–¼
Valid        Invalid/Expired
Token        Token
    â”‚             â”‚
    â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Set  â”‚  â”‚ SecurityContext
â”‚ Auth â”‚  â”‚ removed
â”‚      â”‚  â”‚
â”‚      â”‚  â”‚ â†’ Request fails
â””â”€â”€â”¬â”€â”€â”€â”˜  â”‚ â†’ 401 response
   â”‚      â”‚
   â–¼      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚
â”‚Next  â”‚  â”‚
â”‚Filterâ”‚  â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜  â”‚
   â”‚      â”‚
   â–¼      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthController or  â”‚
â”‚ Other Endpoint     â”‚
â”‚                    â”‚
â”‚ SecurityContext    â”‚
â”‚ available in       â”‚
â”‚ Authentication obj â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND COMPONENT TREE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  App.tsx                                                           â”‚
â”‚  â”œâ”€â”€ AuthProvider                                                  â”‚
â”‚  â”‚   â”œâ”€â”€ Navbar                                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€ Shows: Welcome, {User}, Logout (when logged in)       â”‚
â”‚  â”‚   â”‚   â””â”€ Shows: Login, Register (when not logged in)           â”‚
â”‚  â”‚   â”‚                                                             â”‚
â”‚  â”‚   â””â”€â”€ Router (Routes)                                           â”‚
â”‚  â”‚       â”œâ”€â”€ Route "/" â†’ Home                                      â”‚
â”‚  â”‚       â”‚                                                         â”‚
â”‚  â”‚       â”œâ”€â”€ Route "/login" â†’ Login Page                           â”‚
â”‚  â”‚       â”‚   â””â”€ Form â†’ authService.login() â†’ AuthContext.login()  â”‚
â”‚  â”‚       â”‚                                                         â”‚
â”‚  â”‚       â”œâ”€â”€ Route "/register" â†’ Register Page                     â”‚
â”‚  â”‚       â”‚   â””â”€ Form â†’ authService.register() â†’ AuthContext.reg() â”‚
â”‚  â”‚       â”‚                                                         â”‚
â”‚  â”‚       â”œâ”€â”€ Route "/vehicles" â†’ Vehicles (Public)                 â”‚
â”‚  â”‚       â”‚                                                         â”‚
â”‚  â”‚       â”œâ”€â”€ Route "/dashboard" â†’ ProtectedRoute                   â”‚
â”‚  â”‚       â”‚   â”œâ”€ Check: isAuthenticated?                           â”‚
â”‚  â”‚       â”‚   â”œâ”€ Yes â†’ Dashboard (useAuth hook)                     â”‚
â”‚  â”‚       â”‚   â””â”€ No â†’ Redirect to /login                           â”‚
â”‚  â”‚       â”‚                                                         â”‚
â”‚  â”‚       â””â”€â”€ Route "/booking/:id" â†’ ProtectedRoute                 â”‚
â”‚  â”‚           â”œâ”€ Check: isAuthenticated?                           â”‚
â”‚  â”‚           â”œâ”€ Yes â†’ Booking Page                                 â”‚
â”‚  â”‚           â””â”€ No â†’ Redirect to /login                           â”‚
â”‚  â”‚                                                                 â”‚
â”‚  â””â”€â”€ Footer                                                        â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               DATA FLOW BETWEEN COMPONENTS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  AuthContext                                                     â”‚
â”‚  â”œâ”€ State: user, loading, isAuthenticated                        â”‚
â”‚  â”œâ”€ Methods: login, register, logout                             â”‚
â”‚  â””â”€ Provides: useAuth() hook                                     â”‚
â”‚      â”‚                                                            â”‚
â”‚      â”œâ”€â†’ Login Component uses useAuth()                          â”‚
â”‚      â”œâ”€â†’ Register Component uses useAuth()                       â”‚
â”‚      â”œâ”€â†’ ProtectedRoute uses useAuth()                           â”‚
â”‚      â”œâ”€â†’ Navbar uses useAuth()                                   â”‚
â”‚      â””â”€â†’ Dashboard uses useAuth()                                â”‚
â”‚                                                                  â”‚
â”‚  localStorage                                                    â”‚
â”‚  â”œâ”€ Key: token (JWT string)                                      â”‚
â”‚  â”œâ”€ Key: user (User object JSON)                                 â”‚
â”‚  â”‚                                                                â”‚
â”‚  â””â”€â†’ Persists across page reloads                                â”‚
â”‚      â””â”€â†’ AuthContext initializes from localStorage                â”‚
â”‚      â””â”€â†’ axiosInstance reads token from localStorage              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Layers Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SECURITY LAYERS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: TRANSPORT SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  HTTP/HTTPS                                                 â”‚
â”‚  â””â”€ HTTPS in production (TLS/SSL encryption)               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 2: CORS SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  CORS Configuration                                         â”‚
â”‚  â”œâ”€ Only allow: localhost:3000, 4200, 5173                â”‚
â”‚  â”œâ”€ Only allow: GET, POST, PUT, DELETE                    â”‚
â”‚  â”œâ”€ Only allow: Authorization, Content-Type headers       â”‚
â”‚  â””â”€ Credentials allowed                                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 3: INPUT VALIDATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Frontend Validation                Backend Validation     â”‚
â”‚  â”œâ”€ Email format                    â”œâ”€ @Valid annotations  â”‚
â”‚  â”œâ”€ Password length                 â”œâ”€ Email format       â”‚
â”‚  â”œâ”€ Required fields                 â”œâ”€ Password length    â”‚
â”‚  â””â”€ Password match                  â””â”€ Field constraints   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 4: AUTHENTICATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  JWT Authentication                                         â”‚
â”‚  â”œâ”€ Bearer token in Authorization header                   â”‚
â”‚  â”œâ”€ Token signature validation (HS256)                     â”‚
â”‚  â”œâ”€ Token expiration check (24 hours)                      â”‚
â”‚  â”œâ”€ Claims validation (user ID, role)                      â”‚
â”‚  â””â”€ JwtAuthenticationFilter intercepts all requests         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 5: PASSWORD SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  BCrypt Password Encryption                                â”‚
â”‚  â”œâ”€ Strength: 10 rounds (configurable)                     â”‚
â”‚  â”œâ”€ Never stored in plain text                             â”‚
â”‚  â”œâ”€ Salt automatically generated                           â”‚
â”‚  â”œâ”€ Resistant to rainbow table attacks                     â”‚
â”‚  â””â”€ Time complexity: ~100ms per hash                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 6: AUTHORIZATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Role-Based Access Control (RBAC)                           â”‚
â”‚  â”œâ”€ ROLE_CUSTOMER                                           â”‚
â”‚  â”œâ”€ ROLE_ADMIN                                              â”‚
â”‚  â”œâ”€ Endpoints protected by role                            â”‚
â”‚  â”œâ”€ SecurityContext has user principal                     â”‚
â”‚  â””â”€ Authorization decisions at method level                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 7: ERROR HANDLING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  GlobalExceptionHandler                                    â”‚
â”‚  â”œâ”€ No stack traces in production                          â”‚
â”‚  â”œâ”€ Secure error messages                                  â”‚
â”‚  â”œâ”€ Proper HTTP status codes                               â”‚
â”‚  â”œâ”€ Logging for debugging                                  â”‚
â”‚  â””â”€ No sensitive data exposure                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              users table                         â”‚
â”‚     (Single Table Inheritance Strategy)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚ PRIMARY KEY:                                     â”‚
â”‚ â”œâ”€ id BIGINT AUTO_INCREMENT                     â”‚
â”‚                                                  â”‚
â”‚ UNIQUE CONSTRAINT:                               â”‚
â”‚ â”œâ”€ email VARCHAR(255) UNIQUE                    â”‚
â”‚                                                  â”‚
â”‚ MANDATORY FIELDS:                                â”‚
â”‚ â”œâ”€ name VARCHAR(255) NOT NULL                   â”‚
â”‚ â”œâ”€ email VARCHAR(255) NOT NULL                  â”‚
â”‚ â”œâ”€ phone VARCHAR(20) NOT NULL                   â”‚
â”‚ â”œâ”€ password VARCHAR(255) NOT NULL (hashed)      â”‚
â”‚ â”œâ”€ role ENUM('ADMIN', 'CUSTOMER') NOT NULL      â”‚
â”‚ â”œâ”€ enabled BOOLEAN NOT NULL DEFAULT true        â”‚
â”‚ â”œâ”€ user_type VARCHAR(31) NOT NULL               â”‚
â”‚                                                  â”‚
â”‚ OPTIONAL FIELDS (Customer):                      â”‚
â”‚ â”œâ”€ driving_license_number VARCHAR(255)          â”‚
â”‚ â”œâ”€ address VARCHAR(255)                         â”‚
â”‚                                                  â”‚
â”‚ OPTIONAL FIELDS (Admin):                         â”‚
â”‚ â”œâ”€ department VARCHAR(255)                      â”‚
â”‚ â”œâ”€ employee_id VARCHAR(255)                     â”‚
â”‚                                                  â”‚
â”‚ AUDIT FIELDS:                                    â”‚
â”‚ â”œâ”€ created_at TIMESTAMP DEFAULT NOW             â”‚
â”‚ â”œâ”€ updated_at TIMESTAMP ON UPDATE NOW           â”‚
â”‚                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INDEXES:                                         â”‚
â”‚ â”œâ”€ PRIMARY KEY: id                               â”‚
â”‚ â”œâ”€ UNIQUE INDEX: email                           â”‚
â”‚ â”œâ”€ INDEX: role (for queries)                     â”‚
â”‚ â”œâ”€ INDEX: user_type (for inheritance)           â”‚
â”‚                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EXAMPLE ROWS:                                    â”‚
â”‚                                                  â”‚
â”‚ Customer Row:                                    â”‚
â”‚ â”œâ”€ id: 1                                         â”‚
â”‚ â”œâ”€ name: John Doe                                â”‚
â”‚ â”œâ”€ email: john@example.com                       â”‚
â”‚ â”œâ”€ password: $2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcg... â”‚
â”‚ â”œâ”€ role: CUSTOMER                                â”‚
â”‚ â”œâ”€ user_type: CUSTOMER                           â”‚
â”‚ â”œâ”€ driving_license_number: DL123456              â”‚
â”‚ â”œâ”€ address: 123 Main Street                      â”‚
â”‚ â”œâ”€ enabled: true                                 â”‚
â”‚                                                  â”‚
â”‚ Admin Row:                                       â”‚
â”‚ â”œâ”€ id: 2                                         â”‚
â”‚ â”œâ”€ name: Admin User                              â”‚
â”‚ â”œâ”€ email: admin@example.com                      â”‚
â”‚ â”œâ”€ password: $2a$10$M8qo8uLOickgx2ZMRZoMyeIjZAgcg... â”‚
â”‚ â”œâ”€ role: ADMIN                                   â”‚
â”‚ â”œâ”€ user_type: ADMIN                              â”‚
â”‚ â”œâ”€ department: Operations                        â”‚
â”‚ â”œâ”€ employee_id: EMP001                           â”‚
â”‚ â”œâ”€ enabled: true                                 â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Endpoints Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            DriveHub Authentication API Endpoints           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ 1. REGISTRATION (Public)                                   â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚    POST /api/auth/register                                 â”‚
â”‚    â”‚                                                        â”‚
â”‚    â”œâ”€ Request:                                             â”‚
â”‚    â”‚  {                                                     â”‚
â”‚    â”‚    "name": "John Doe",                                â”‚
â”‚    â”‚    "email": "john@example.com",                       â”‚
â”‚    â”‚    "phone": "+1234567890",                            â”‚
â”‚    â”‚    "password": "password123",                         â”‚
â”‚    â”‚    "userType": "CUSTOMER",                            â”‚
â”‚    â”‚    "drivingLicenseNumber": "DL123456",               â”‚
â”‚    â”‚    "address": "123 Main St"                           â”‚
â”‚    â”‚  }                                                     â”‚
â”‚    â”‚                                                        â”‚
â”‚    â”œâ”€ Response (201 Created):                              â”‚
â”‚    â”‚  {                                                     â”‚
â”‚    â”‚    "token": "eyJhbGciOiJIUzI1NiIs...",              â”‚
â”‚    â”‚    "type": "Bearer",                                  â”‚
â”‚    â”‚    "id": 1,                                           â”‚
â”‚    â”‚    "name": "John Doe",                                â”‚
â”‚    â”‚    "email": "john@example.com",                       â”‚
â”‚    â”‚    "role": "CUSTOMER"                                 â”‚
â”‚    â”‚  }                                                     â”‚
â”‚    â”‚                                                        â”‚
â”‚    â””â”€ Errors:                                              â”‚
â”‚       â€¢ 400: Email already exists                          â”‚
â”‚       â€¢ 400: Invalid email format                          â”‚
â”‚       â€¢ 400: Password too short                            â”‚
â”‚       â€¢ 500: Server error                                  â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ 2. LOGIN (Public)                                          â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚    POST /api/auth/login                                    â”‚
â”‚    â”‚                                                        â”‚
â”‚    â”œâ”€ Request:                                             â”‚
â”‚    â”‚  {                                                     â”‚
â”‚    â”‚    "email": "john@example.com",                       â”‚
â”‚    â”‚    "password": "password123"                          â”‚
â”‚    â”‚  }                                                     â”‚
â”‚    â”‚                                                        â”‚
â”‚    â”œâ”€ Response (200 OK):                                   â”‚
â”‚    â”‚  {                                                     â”‚
â”‚    â”‚    "token": "eyJhbGciOiJIUzI1NiIs...",              â”‚
â”‚    â”‚    "type": "Bearer",                                  â”‚
â”‚    â”‚    "id": 1,                                           â”‚
â”‚    â”‚    "name": "John Doe",                                â”‚
â”‚    â”‚    "email": "john@example.com",                       â”‚
â”‚    â”‚    "role": "CUSTOMER"                                 â”‚
â”‚    â”‚  }                                                     â”‚
â”‚    â”‚                                                        â”‚
â”‚    â””â”€ Errors:                                              â”‚
â”‚       â€¢ 401: Invalid email or password                     â”‚
â”‚       â€¢ 400: Email required                                â”‚
â”‚       â€¢ 400: Password required                             â”‚
â”‚       â€¢ 404: User not found                                â”‚
â”‚       â€¢ 500: Server error                                  â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ 3. GET CURRENT USER (Protected)                            â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚    GET /api/auth/me                                        â”‚
â”‚    â”‚                                                        â”‚
â”‚    â”œâ”€ Headers:                                             â”‚
â”‚    â”‚  Authorization: Bearer eyJhbGciOiJIUzI1NiIs...       â”‚
â”‚    â”‚                                                        â”‚
â”‚    â”œâ”€ Response (200 OK):                                   â”‚
â”‚    â”‚  {                                                     â”‚
â”‚    â”‚    "id": 1,                                           â”‚
â”‚    â”‚    "name": "John Doe",                                â”‚
â”‚    â”‚    "email": "john@example.com",                       â”‚
â”‚    â”‚    "phone": "+1234567890",                            â”‚
â”‚    â”‚    "role": "CUSTOMER",                                â”‚
â”‚    â”‚    "enabled": true,                                   â”‚
â”‚    â”‚    "drivingLicenseNumber": "DL123456",               â”‚
â”‚    â”‚    "address": "123 Main St"                           â”‚
â”‚    â”‚  }                                                     â”‚
â”‚    â”‚                                                        â”‚
â”‚    â””â”€ Errors:                                              â”‚
â”‚       â€¢ 401: No token provided                             â”‚
â”‚       â€¢ 401: Invalid token                                 â”‚
â”‚       â€¢ 401: Token expired                                 â”‚
â”‚       â€¢ 500: Server error                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               PRODUCTION DEPLOYMENT                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  FRONTEND (React SPA)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ CDN / Web Server (Nginx)                    â”‚        â”‚
â”‚  â”‚ â€¢ Static file serving                       â”‚        â”‚
â”‚  â”‚ â€¢ Gzip compression                          â”‚        â”‚
â”‚  â”‚ â€¢ Cache headers                             â”‚        â”‚
â”‚  â”‚ â€¢ SSL/TLS certificate                       â”‚        â”‚
â”‚  â”‚ â€¢ Redirect HTTP â†’ HTTPS                     â”‚        â”‚
â”‚  â”‚ â€¢ CORS headers configured                   â”‚        â”‚
â”‚  â”‚                                             â”‚        â”‚
â”‚  â”‚ .env.production                             â”‚        â”‚
â”‚  â”‚ â€¢ VITE_API_URL=https://api.example.com     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                       â”‚ HTTPS                           â”‚
â”‚                       â”‚                                 â”‚
â”‚  BACKEND (Spring Boot)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Application Server                          â”‚        â”‚
â”‚  â”‚ â€¢ Spring Boot JAR                           â”‚        â”‚
â”‚  â”‚ â€¢ JVM with production settings              â”‚        â”‚
â”‚  â”‚ â€¢ Load balancer (nginx/HAProxy)             â”‚        â”‚
â”‚  â”‚ â€¢ Health checks endpoint                    â”‚        â”‚
â”‚  â”‚ â€¢ Monitoring/Logging                        â”‚        â”‚
â”‚  â”‚                                             â”‚        â”‚
â”‚  â”‚ application-prod.properties                 â”‚        â”‚
â”‚  â”‚ â€¢ DB_URL (environment variable)             â”‚        â”‚
â”‚  â”‚ â€¢ DB_USERNAME (environment variable)        â”‚        â”‚
â”‚  â”‚ â€¢ JWT_SECRET (environment variable)         â”‚        â”‚
â”‚  â”‚ â€¢ DDL: validate (not update)                â”‚        â”‚
â”‚  â”‚ â€¢ Logging: INFO level                       â”‚        â”‚
â”‚  â”‚ â€¢ Show SQL: false                           â”‚        â”‚
â”‚  â”‚                                             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                       â”‚ Connection Pool                 â”‚
â”‚                       â”‚ (HikariCP)                      â”‚
â”‚  DATABASE (MySQL)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ MySQL Server                                â”‚        â”‚
â”‚  â”‚ â€¢ Production database                       â”‚        â”‚
â”‚  â”‚ â€¢ Encrypted connections                     â”‚        â”‚
â”‚  â”‚ â€¢ Regular backups                           â”‚        â”‚
â”‚  â”‚ â€¢ Replication setup                         â”‚        â”‚
â”‚  â”‚ â€¢ indexes on email, role, user_type         â”‚        â”‚
â”‚  â”‚                                             â”‚        â”‚
â”‚  â”‚ drivehub_db                                 â”‚        â”‚
â”‚  â”‚ â””â”€ users table                              â”‚        â”‚
â”‚  â”‚    â””â”€ Single table inheritance              â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                          â”‚
â”‚  MONITORING & LOGGING                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ â€¢ ELK Stack (Elasticsearch, Logstash, Kibana)â”‚      â”‚
â”‚  â”‚ â€¢ Prometheus metrics                         â”‚       â”‚
â”‚  â”‚ â€¢ Alert notifications                        â”‚       â”‚
â”‚  â”‚ â€¢ Application Performance Monitoring (APM)   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visual Guide Created**: October 16, 2025  
**For detailed documentation**: See AUTHENTICATION_IMPLEMENTATION_GUIDE.md
